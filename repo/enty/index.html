<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.13.20"/><style data-styled="kteFIe kLKIXV  yzjJj KVgYN hWruDD bgPzrW cgrpID hGGuat kGlCjn hGCAXr kjGDVc bXvekE evMGQq bdNGJg iZdLaP aoYnG iBwBXi jclkHy" data-styled-version="4.3.2">
/* sc-component-id: Layout__Box-sc-11bo1r0-0 */
.yzjJj{margin-bottom:16px;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;} @media screen and (min-width:52em){.yzjJj{margin-right:16px;}}.KVgYN{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}.hWruDD{width:50rem;overflow:auto;padding-bottom:256px;-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;}
/* sc-component-id: Layout__Flex-sc-11bo1r0-1 */
.kteFIe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-left:8px;margin-right:8px;padding-top:8px;display:block;height:100vh;} @media screen and (min-width:52em){.kteFIe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.kLKIXV{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;} @media screen and (min-width:40em){.kLKIXV{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}
/* sc-component-id: sc-global-3709028548 */
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;} article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;} body{line-height:1;} ol,ul{list-style:none;} blockquote,q{quotes:none;} blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;} table{border-collapse:collapse;border-spacing:0;} *{box-sizing:border-box;} body{background-color:#343d46;color:#d8dee9;font-family:'Menlo','Inconsolata',monospaced;font-size:13px;line-height:1.4;}
/* sc-component-id: Affordance__List-sc-1ewusek-0 */
.hGGuat{padding-left:1.8em;position:relative;}.kGlCjn{margin-top:16px;margin-bottom:16px;padding-left:1.8em;position:relative;}
/* sc-component-id: Affordance__ListItem-sc-1ewusek-1 */
ul > .hGCAXr:before{content:'*';position:absolute;left:.6em;} ol > .hGCAXr{list-style-type:decimal;}
/* sc-component-id: Affordance__Link-sc-1ewusek-2 */
.kjGDVc{color:#6699cc;} .kjGDVc:visited{color:#6699cc;}
/* sc-component-id: Affordance__Label-sc-1ewusek-3 */
.bXvekE{color:#6D6D6D;}
/* sc-component-id: Affordance__Code-sc-1ewusek-5 */
.jclkHy{color:#d8dee9;background-color:#1b1f23;margin:1em 0;padding:.6em;overflow-x:auto;} .jclkHy .comment{color:#6D6D6D;} .jclkHy .keyword{color:#ec5f67;} .jclkHy .string{color:#99c794;} .jclkHy .number{color:#6699cc;} .jclkHy .tag{color:#fac863;} .jclkHy .script{color:#d8dee9;} .jclkHy .selector{color:#fac863;} .jclkHy .property{color:#ec5f67;} .jclkHy .gatsby-highlight-code-line{display:block;background-color:#2e4e3a;margin:0 -.6em;padding:0 .6em;}
/* sc-component-id: Affordance__Text-sc-1ewusek-7 */
.iZdLaP{margin-bottom:16px;}.aoYnG{color:#fac863;margin-top:16px;}
/* sc-component-id: Affordance__Heading-sc-1ewusek-9 */
.bgPzrW{text-align:left;margin-bottom:16px;padding-left:16px;padding-left:0.6rem;z-index:1;background-color:#fac863;color:#343d46;font-weight:'bold';text-align:'center';}.cgrpID{margin-bottom:16px;position:-webkit-sticky;position:sticky;top:0;padding-left:0.6rem;z-index:1;background-color:#fac863;color:#343d46;font-weight:'bold';text-align:'center';}
/* sc-component-id: Affordance__SubHeading-sc-1ewusek-10 */
.evMGQq{margin-top:16px;margin-bottom:16px;z-index:1;background-color:#343d46;color:#fac863;box-shadow:0 1px 0 0 #fac863;}.bdNGJg{margin-top:32px;margin-bottom:16px;position:-webkit-sticky;position:sticky;top:18px;z-index:1;background-color:#343d46;color:#fac863;box-shadow:0 1px 0 0 #fac863;}</style><link as="script" rel="preload" href="/webpack-runtime-a24fb2161da0bfb4f80f.js"/><link as="script" rel="preload" href="/app-abb469e66a877f9cd5ba.js"/><link as="script" rel="preload" href="/component---src-pages-repo-enty-mdx-6d79d08632934b92554e.js"/><link as="fetch" rel="preload" href="/page-data/repo/enty/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div display="block,,flex" height="100vh" class="Layout__Flex-sc-11bo1r0-1 kteFIe"><div class="Layout__Box-sc-11bo1r0-0 yzjJj"><h1 class="Affordance__Text-sc-1ewusek-7 Affordance__Heading-sc-1ewusek-9 bgPzrW">Allan Hortle</h1><ul class="Affordance__List-sc-1ewusek-0 hGGuat"><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/spoon" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Spoon</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE"></span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/decimal-time" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Decimal Time</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE"></span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/magnitude" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Magnitude</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE"></span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="https://bible.allanhortle.com" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Bible Word Stats</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE"></span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="https://boardgameonepagers.com" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Board Game One Pagers</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE"></span></div></li></ul><h2 class="Affordance__Text-sc-1ewusek-7 Affordance__SubHeading-sc-1ewusek-10 evMGQq">Repos</h2><ul class="Affordance__List-sc-1ewusek-0 hGGuat"><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/enty" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Enty</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">Normalized state management</span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/pnut" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Pnut</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">Flexible React Charting</span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/stringdate" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Stringdate</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">Only Dates; only strings</span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/jsx" class="Affordance__Link-sc-1ewusek-2 kjGDVc">JSX</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">Sublime Text - Syntax</span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/centurion" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Centurion</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">Submite Text - Theme</span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/puffin" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Puffin</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">Dotfiles</span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/covcov" class="Affordance__Link-sc-1ewusek-2 kjGDVc">covcov</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">A TUI for coverage reports</span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/hubgit" class="Affordance__Link-sc-1ewusek-2 kjGDVc">hubgit</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">A TUI for github</span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/pipwerks-scorm-api" class="Affordance__Link-sc-1ewusek-2 kjGDVc">scorm-api-wrapper</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">An wrapper for scorm</span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/fronads" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Fronads</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">beginner-friendly monads</span></div></li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/repo/moose" class="Affordance__Link-sc-1ewusek-2 kjGDVc">Moose</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">Front-end Methodology</span></div></li></ul><h2 class="Affordance__Text-sc-1ewusek-7 Affordance__SubHeading-sc-1ewusek-10 evMGQq">Posts</h2><ul class="Affordance__List-sc-1ewusek-0 hGGuat"><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr"><div class="Layout__Flex-sc-11bo1r0-1 kLKIXV"><div class="Layout__Box-sc-11bo1r0-0 KVgYN"><a href="/post/2018-04-24-identity-monad/" class="Affordance__Link-sc-1ewusek-2 kjGDVc">The Identity Monad</a></div><span class="Affordance__Label-sc-1ewusek-3 bXvekE">2019-08-05</span></div></li></ul></div><div width="50rem" overflow="auto" class="Layout__Box-sc-11bo1r0-0 hWruDD"><h1 class="Affordance__Text-sc-1ewusek-7 Affordance__Heading-sc-1ewusek-9 cgrpID">Enty</h1><h2 class="Affordance__Text-sc-1ewusek-7 Affordance__SubHeading-sc-1ewusek-10 bdNGJg">Introduction</h2><p class="Affordance__Text-sc-1ewusek-7 iZdLaP">Enty is a framework for managing data requested from back-ends and APIs.  Instead of you manually storing requested data, Enty uses schemas to describe relationships and stores the data as normalized entities.</p><ul class="Affordance__List-sc-1ewusek-0 kGlCjn"><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr">Views can declare what data they need.</li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr">There is practically no data fetching code.</li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr">Data given to views is always up to date.</li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr">Bad relationships in data become clear.</li><li class="Affordance__ListItem-sc-1ewusek-1 hGCAXr">pairs wonderfully with graphql</li></ul><h2 class="Affordance__Text-sc-1ewusek-7 Affordance__SubHeading-sc-1ewusek-10 bdNGJg">Purpose</h2><p class="Affordance__Text-sc-1ewusek-7 iZdLaP">Any webapp that involves  both a back and a front end will create entities. Unique pieces of data that are known by an id.  The back end might call them models, the front end might call them application state, let&#x27;s call them entities.</p><p class="Affordance__Text-sc-1ewusek-7 iZdLaP">When the client side thinks of storing these entities in terms of endpoints and stores (or even actions and reducers) it&#x27;s another set of hands touching the data. It allows more places for shady hacks to creep in. It allows more places for code to become brittle. It allows more places for the code to break.</p><p class="Affordance__Text-sc-1ewusek-7 iZdLaP">On top of this you force the front end to recreate relationships between entities. Storing data by type in isolated stores logically makes sense, but when a view visually combines two entities (post with comments) you create a point where the front end needs to know exactly how to reconstruct this. This is not an insurmountable problem but as the code base grows so will the places where the front end has to know some specific detail and the places where things can go wrong.</p><p class="Affordance__Text-sc-1ewusek-7 iZdLaP">In reality the front end doesn&#x27;t care where the data came from or how it is stored. It just knows that it wants a certain number of entities and information about whether they have arrived yet.</p><p class="Affordance__Text-sc-1ewusek-7 iZdLaP">Enty lets you describe the relationships of your entities through schemas. It is then able to store them in a normalized state. This means that they are not stored by request but by the unique id that they were given by the back-end.</p><h2 class="Affordance__Text-sc-1ewusek-7 Affordance__SubHeading-sc-1ewusek-10 bdNGJg">Getting Started</h2><p class="Affordance__Text-sc-1ewusek-7 iZdLaP">Enty has two parts: A Schema and an EntityApi.</p><h3 class="Affordance__Text-sc-1ewusek-7 aoYnG">1. Schema</h3><p class="Affordance__Text-sc-1ewusek-7 iZdLaP">The first step in implementing Enty is to define your schema. This defines what relationships your entities have. A user might have a list of friends which are also users. So we can define that as a user</p><div class="gatsby-highlight" data-language="js"><pre class="language-js Affordance__Code-sc-1ewusek-5 jclkHy"><code class="Affordance__Text-sc-1ewusek-7 iBwBXi"><span class="token comment">// entity/ApplicationSchema.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    ObjectSchema<span class="token punctuation">,</span>
    ArraySchema<span class="token punctuation">,</span>
    EntitySchema<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;enty&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EntitySchema</span><span class="token punctuation">(</span><span class="token string">&#x27;user&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> userList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListSchema</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

user<span class="token punctuation">.</span>shape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectSchema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    friendList<span class="token punctuation">:</span> userList
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">ObjectSchema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   user<span class="token punctuation">,</span>
   userList
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><h3 class="Affordance__Text-sc-1ewusek-7 aoYnG">2. API</h3><p class="Affordance__Text-sc-1ewusek-7 iZdLaP">The second thing we need to do is to create our EntityApi from our schema;</p><div class="gatsby-highlight" data-language="js"><pre class="language-js Affordance__Code-sc-1ewusek-5 jclkHy"><code class="Affordance__Text-sc-1ewusek-7 iBwBXi"><span class="token comment">// entity/EntityApi.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>EntityApi<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;enty&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ApplicationSchema <span class="token keyword">from</span> <span class="token string">&#x27;./ApplicationSchema&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> UserQuery <span class="token keyword">from</span> <span class="token string">&#x27;./UserQuery&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> UserListQuery <span class="token keyword">from</span> <span class="token string">&#x27;./UserListQuery&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Api <span class="token operator">=</span> <span class="token function">EntityApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">user</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">variables</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">&#x27;/graphql&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>query<span class="token punctuation">:</span> UserQuery<span class="token punctuation">,</span> variables<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">userList</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter">variables</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">&#x27;/graphql&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>query<span class="token punctuation">:</span> UserListQuery<span class="token punctuation">,</span> variables<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> ApplicationSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> EntityProvider <span class="token operator">=</span> Api<span class="token punctuation">.</span>Provider<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> user <span class="token operator">=</span> Api<span class="token punctuation">.</span>user<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> userList <span class="token operator">=</span> Api<span class="token punctuation">.</span>userList<span class="token punctuation">;</span></code></pre></div><h3 class="Affordance__Text-sc-1ewusek-7 aoYnG">3. Connect to react</h3><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx Affordance__Code-sc-1ewusek-5 jclkHy"><code class="Affordance__Text-sc-1ewusek-7 iBwBXi"><span class="token comment">// index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>React<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>EntityProvider<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./EntityApi&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#x27;react-dom&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#x27;./App&#x27;</span><span class="token punctuation">;</span>


ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EntityProvider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">EntityProvider</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#x27;app&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><h3 class="Affordance__Text-sc-1ewusek-7 aoYnG">4. Make a Query</h3><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx Affordance__Code-sc-1ewusek-5 jclkHy"><code class="Affordance__Text-sc-1ewusek-7 iBwBXi"><span class="token comment">// ./App.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>React<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>LoadingBoundary<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;react-enty&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./EntityApi&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Spinner <span class="token keyword">from</span> <span class="token string">&#x27;./components/Spinner&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Error <span class="token keyword">from</span> <span class="token string">&#x27;./components/Error&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">useRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// request a new user when props.id changes</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        message<span class="token punctuation">.</span><span class="token function">onRequest</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>props<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoadingBoundary</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Spinner</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token attr-name">error</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Error</span></span><span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        ({user}) =&gt; </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>user<span class="token punctuation">.</span>avatar<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">LoadingBoundary</span></span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span></code></pre></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/repo/enty/";window.webpackCompilationHash="d010cc14166365843071";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-abb469e66a877f9cd5ba.js"],"component---src-pages-404-js":["/component---src-pages-404-js-b7fb86bbe1cdcd6c3659.js"],"component---src-pages-decimal-time-js":["/component---src-pages-decimal-time-js-e7d86a55c4299344c5f6.js"],"component---src-pages-index-js":["/component---src-pages-index-js-1c941edc6228689c4da7.js"],"component---src-pages-magnitude-js":["/component---src-pages-magnitude-js-2dd83aff21d14fe4c5db.js"],"component---src-pages-spoon-js":["/component---src-pages-spoon-js-03101e68acee9a299f74.js"],"component---src-pages-post-2018-04-24-identity-monad-mdx":["/component---src-pages-post-2018-04-24-identity-monad-mdx-d4173fcbddeef281163e.js"],"component---src-pages-repo-centurion-mdx":["/component---src-pages-repo-centurion-mdx-88a17ec86ed6b7c15b4a.js"],"component---src-pages-repo-covcov-mdx":["/component---src-pages-repo-covcov-mdx-939fef79caf5c09ccc5b.js"],"component---src-pages-repo-enty-mdx":["/component---src-pages-repo-enty-mdx-6d79d08632934b92554e.js"],"component---src-pages-repo-fronads-mdx":["/component---src-pages-repo-fronads-mdx-b95b209bcead59a177bc.js"],"component---src-pages-repo-hubgit-mdx":["/component---src-pages-repo-hubgit-mdx-e12e617daea04c797d4a.js"],"component---src-pages-repo-jsx-mdx":["/component---src-pages-repo-jsx-mdx-657c3f3fe7618ab945ba.js"],"component---src-pages-repo-moose-mdx":["/component---src-pages-repo-moose-mdx-f3fe6daec90b0dcc7945.js"],"component---src-pages-repo-pnut-mdx":["/component---src-pages-repo-pnut-mdx-52796e728eb35e96a99d.js"],"component---src-pages-repo-puffin-mdx":["/component---src-pages-repo-puffin-mdx-7f7081257e5df38d1aba.js"],"component---src-pages-repo-scorm-api-wrapper-mdx":["/component---src-pages-repo-scorm-api-wrapper-mdx-e8fec7159431f53cebc7.js"],"component---src-pages-repo-stringdate-mdx":["/component---src-pages-repo-stringdate-mdx-b6abde57b68596cc2726.js"]};/*]]>*/</script><script src="/component---src-pages-repo-enty-mdx-6d79d08632934b92554e.js" async=""></script><script src="/app-abb469e66a877f9cd5ba.js" async=""></script><script src="/webpack-runtime-a24fb2161da0bfb4f80f.js" async=""></script></body></html>